<!DOCTYPE html>
<html ng-app="ga">

  <head>
    <title>map.geo.admin.ch PREVIEW</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="description" content="Maps of Switzerland : The official geoportal of the Swiss Confederation provides digital data which can be viewed, printed out, ordered and supplied by means of the map viewer tool. Geoinformation is made available by public-sector organisations and is accessible to the general public."/>
    <meta name="keywords" content="maps Switzerland, map viewer, Confederation, geodata, public platform, geographical information, geoportal, orthophotos, geolocation, geoinformation, Geodaten, Geoinformation, Bund, Plattform, Karte, Kartendienst, Kartenviewer"/>

    <link href="${version}style/app.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" type="image/x-icon" href="${version}img/favicon.ico"/>
  </head>

  <body ng-controller="GaMapController">
    <div id="wrapper">
      <div id="header" class="navbar navbar-fixed-top">
        <div id="logo">
          <img class="hidden-sm" src="${version}img/logo.ch.jpeg" width="246" height="89"/>
          <img class="visible-sm" src="${version}img/geoadminmobile-logo.png" width="93" height="36"/>
        </div>
        <form class="navbar-form pull-right"
          ng-controller="GaBackgroundLayerSelectorController">
          <div ga-background-layer-selector
            ga-background-layer-selector-map="map"
            ga-background-layer-selector-options="options"></div>
        </form>
        <style>
          @media screen and (max-width: 480px) {
            .preview-sm-hide{ display: none !important;}
          }
          iframe {
            vertical-align: middle;
          }
        </style>
        <h3 class="preview-sm-hide"
          style="display:inline-block;font-size:110%;margin:0;color:red;vertical-align:top;padding:
          .4em .3em 0">
            This application is a preview.
          </h3>
          <div class="visible-lg" style="position:absolute;top:40px;left:260px;">
          Please provide feedback: <a href="mailto:info@geo.admin.ch?subject=map.geo.admin.ch preview">info[at]geo.admin.ch</a> or 
          <a href="https://twitter.com/intent/tweet?screen_name=swiss_geoportal&text=I%20like%20the%20preview%2C%20but%20you%20should" class="twitter-mention-button">Tweet to @swiss_geoportal</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          <br><em>print is not functional, for now...</em>
        </div>
      </div>
      <div id="map" class="map" ga-map ga-map-map="map" ga-map-options="options">
        <div ga-context-menu class="contextmenu popover bottom"></div>
      </div>
      <div id="footer" class="navbar navbar-fixed-bottom">
        <div id="scaleline" class="pull-left" ga-scale-line ga-scale-line-map="map"></div>
% if device == 'desktop':
        <div id="mouseposition" class="pull-left" ng-controller="GaMousePositionController">
          <select id="mouseposition-select"
            ng-model="options.projection"
            ng-options="p.label for p in mousePositionProjections">
          </select>
          <div id="mouseposition-value"
            ga-mouse-position
            ga-mouse-position-map="map"
            ga-mouse-position-options="options"></div>
        </div>
% endif
        <div id="attribution" class="pull-left" ga-attribution ga-attribution-map="map"></div>
        <div id="copyrights" class="pull-right"><a href="http://www.geo.admin.ch/internet/geoportal/en/home/geoadmin/contact.html#copyright">Copyright & data protection</a></div>
        <div id="geoadminlink" class="pull-right"><a href="http://www.geo.admin.ch/internet/geoportal/en/home.html">geo.admin.ch</a></div>
      </div>
    </div>

    <div id="pulldown">
      <div id="pulldown-content" class="content in">
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#share">
              Share
            </a>
          </div>
          <div id="share" class="collapse">
            <div class="accordion-inner">
              <p>under construction ...</p>
            </div>
          </div>
        </div> <!-- .accordion-group -->

        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#print">
              Print
            </a>
          </div>
          <div id="print" class="collapse">
            <div class="accordion-inner">
              <%include file="src/print/partials/form.mako.html"/>
            </div>
          </div>
        </div>  <!-- .accordion-group -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#tools">
              Map tools
            </a>
          </div>
          <div id="tools" class="collapse">
            <div class="accordion-inner">
              <p>under construction ...</p>
            </div>
          </div>
        </div> <!-- .accordion-group -->

        <div class="accordion-group">
          <div class="accordion-heading">
            <div class="theme-toggle">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Choose theme</a>
              <div class="dropdown-menu">
                <p>under construction ...</p>
              </div>
            </div>
            <a class="accordion-toggle light collapsed" data-toggle="collapse" href="#catalog">
              Geo Catalog
            </a>
          </div>
          <div id="catalog" class="collapse">
            <div class="accordion-inner">
              <p>under construction ...</p>
            </div>
          </div>
        </div> <!-- .accordion-group -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle light collapsed" data-toggle="collapse" href="#selection">
              Your selection
            </a>
          </div>
          <div id="selection" class="collapse">
            <div class="accordion-inner">
              <p>under construction ...</p>
            </div>
          </div>
        </div> <!-- .accordion-group -->
      </div> <!-- #pulldown-content -->

      <div class="text-center">
        <button type="button" data-toggle="collapse" data-target="#pulldown-content" class="toggle btn btn-default">
          <span class="pulldown-close">close</span>
          <span class="pulldown-open">open</span>
        </button>
      </div>
    </div>
% if mode == "prod":
    <script src="${version}lib/build.js"></script>
% else:
    <script src="lib/jquery-2.0.2.js"></script>
    <script src="lib/angular-1.1.5.js"></script>
    <script src="lib/bootstrap-3.0.0.js"></script>
    <script src="lib/proj4js-compressed.js"></script>
    <script src="lib/EPSG21781.js"></script>

    <!-- Use Closure to load the application scripts -->
    <script>
      window.CLOSURE_NO_DEPS = true;
      window.CLOSURE_BASE_PATH = "src/";
    </script>

    <!-- ol-whitespace.js includes Closure's base.js code, so we don't
         need to load base.js ourselves. We keep Closure's base.js file
         around in case we need to test with ol.js or ol-simple.js. -->
    <script src="lib/ol-whitespace.js"></script>
    <!--<script src="lib/closure/base.js"></script>-->
    <script src="src/deps.js"></script>

    <script>
      goog.require('ga');
    </script>
%endif

  </body>
</html>

