<!DOCTYPE html>
<html ng-app="ga">
  <head>
    <title>map.geo.admin.ch PREVIEW</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <meta name="description" content="Maps of Switzerland : The official geoportal of the Swiss Confederation provides digital data which can be viewed, printed out, ordered and supplied by means of the map viewer tool. Geoinformation is made available by public-sector organisations and is accessible to the general public."/>
    <meta name="keywords" content="maps Switzerland, map viewer, Confederation, geodata, public platform, geographical information, geoportal, orthophotos, geolocation, geoinformation, Geodaten, Geoinformation, Bund, Plattform, Karte, Kartendienst, Kartenviewer"/>
% if mode == "prod": 
    <link href="${version}/style/app.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" type="image/x-icon" href="${version}/img/favicon.ico"/>
% else: 
    <link href="style/app.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico"/>
%endif
  </head>
  <body ng-controller="GaMapController">
    <div id="wrapper">
      <div id="header" class="navbar navbar-fixed-top">
      <div style="position:absolute; top: 0px; left: 270px;">
        <h3><font color="red">This application is a preview. Development is ongoing.</font></h3>
        Please provide feedback: <a href="mailto:info@geo.admin.ch?subject=map.geo.admin.ch preview">info[at]geo.admin.ch</a> or 
        <a href="https://twitter.com/intent/tweet?screen_name=swiss_geoportal&text=I%20like%20the%20preview%2C%20but%20you%20should" class="twitter-mention-button">Tweet to @swiss_geoportal</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        (print is not functional, for now...)
        </div>
% if mode == "prod":
        <img src="${version}/img/logo.ch.jpeg" style="height: 89px; width: 246px;"/>
% else:
        <img src="img/logo.ch.jpeg" style="height: 89px; width: 246px;"/>
%endif
        <form class="navbar-form pull-right"
              ng-controller="GaBackgroundLayerSelectorController">
          <div x-ga-background-layer-selector
               x-ga-background-layer-selector-map="map"
               x-ga-background-layer-selector-wmts-url="wmtsUrl"
               x-ga-background-layer-selector-wmts-layers="wmtsLayers"></div>
        </form>
      </div>
      <div id="map" class="map" x-ga-map="map" x-ga-map-resolutions="resolutions">
        <div ga-context-menu ga-context-menu-map="map" class="contextmenu popover"></div>
      </div>
      <div id="footer" class="navbar navbar-fixed-bottom">
        <div id="scaleline" class="pull-left" x-ga-scale-line x-ga-scale-line-map="map"></div>
        <div class="pipe"></div>
        <div id="mouseposition" class="pull-left" ng-controller="GaMousePositionController">
          <select id="mouseposition-select"
            ng-model="mousePositionProjection"
            ng-options="p.label for p in mousePositionProjections">
          </select>
          <div id="mouseposition-value"
             x-ga-mouse-position
             x-ga-mouse-position-map="map"
             x-ga-mouse-position-projection="mousePositionProjection"></div>
        </div>
        <div class="pipe"></div>
        <div id="attribution" class="pull-left" x-ga-attribution x-ga-attribution-map="map"></div>
      </div>
    </div>

    <div id="pulldown">
      <div id="pulldown-content" class="content collapse in">
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#print">
              Print
            </a>
            <div id="print" class="collapse">
              <div class="accordion-inner">
                <%include file="src/print/partials/form.mako.html"/>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center">
        <button type="button" data-toggle="collapse" data-target="#pulldown-content" class="toggle btn btn-default">
          <span class="pulldown-close">close</span>
          <span class="pulldown-open">open</span>
        </button>
      </div>
    </div>
% if mode == "prod":
    <script src="${version}/lib/build.js"></script>
% else:
    <script src="lib/angular-1.1.5.js"></script>
    <script src="lib/proj4js-compressed.js"></script>
    <script src="lib/EPSG21781.js"></script>
    <script src="lib/jquery-2.0.2.min.js"></script>
    <script src="lib/bootstrap-3.0.0.js"></script>

    <!-- Use Closure to load the application scripts -->
    <script>
      window.CLOSURE_NO_DEPS = true;
      window.CLOSURE_BASE_PATH = "src/";
    </script>

    <!-- ol-whitespace.js includes Closure's base.js code, so we don't
         need to load base.js ourselves. We keep Closure's base.js file
         around in case we need to test with ol.js or ol-simple.js. -->
    <script src="lib/ol-whitespace.js"></script>
    <!--<script src="lib/closure/base.js"></script>-->
    <script src="src/deps.js"></script>

    <script>
      goog.require('ga');
    </script>
%endif

  </body>
</html>
