<!DOCTYPE html>
<html ng-app="ga">
  <head>
    <title>map.geo.admin.ch PREVIEW</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="description" content="Maps of Switzerland : The official geoportal of the Swiss Confederation provides digital data which can be viewed, printed out, ordered and supplied by means of the map viewer tool. Geoinformation is made available by public-sector organisations and is accessible to the general public."/>
    <meta name="keywords" content="maps Switzerland, map viewer, Confederation, geodata, public platform, geographical information, geoportal, orthophotos, geolocation, geoinformation, Geodaten, Geoinformation, Bund, Plattform, Karte, Kartendienst, Kartenviewer"/>


    <link href="${version}style/app.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" type="image/x-icon" href="${version}img/favicon.ico"/>
  </head>

  <body ng-controller="GaMainController" ng-class="bodyClass">
      <div id="header" class="navbar navbar-fixed-top">
        <a href="?" id="logo">
          <img src="${version}img/logo.ch.jpeg" style="width: 246px; height: 89px"/>
        </a>
        <input type="text" name="q" placeholder="under construction..." id="search" class="input-small"/>
% if device == 'desktop':
        <form class="navbar-form pull-right hidden-sm">
          <div ga-background-layer-selector
            ga-background-layer-selector-map="map"></div>
          <div id="toptools">
            <a href="#feedback" data-toggle="modal" translate>problem_announcement</a>
            <div ng-controller="GaTranslationController">
              <div ga-translation-selector
                ga-translation-selector-options="options"></div>
            </div>
          </div>
        </form>
% endif
      </div>
      <div id="map" class="map" ga-map ga-map-map="map">
        <div  ng-controller="GaContextPopupController">
          <div ga-context-popup ga-context-popup-map="map" ga-context-popup-options="options"></div>
        </div>
        <div ga-geolocation ga-geolocation-map="map"></div>
      </div>

      <div id="footer" class="navbar navbar-fixed-bottom">
        <div id="scaleline" class="pull-left" ga-scale-line ga-scale-line-map="map"></div>
% if device == 'desktop':
        <div id="copyrightstext" class="pull-left">
          <span >&copy;&nbsp;</span>
          <span translate>data</span>
        </div>
        <div class="pull-left" ga-attribution ga-attribution-map="map"></div>
            <div id="mouseposition" class="pull-left visible-lg" ng-controller="GaMousePositionController">
          <select
            ng-model="options.projection"
            ng-options="p.label for p in mousePositionProjections">
          </select>
          <div class="ga-mouse-position"
            ga-mouse-position
            ga-mouse-position-map="map"
            ga-mouse-position-options="options"></div>
        </div>
% endif
        <div id="copyrights" class="pull-right"><a href="http://www.geo.admin.ch/internet/geoportal/en/home/geoadmin/contact.html#copyright">Copyright & data protection</a></div>
% if device == 'desktop':
        <div id="geoadminlink" class="pull-right"><a href="http://www.geo.admin.ch/internet/geoportal/en/home.html">geo.admin.ch</a></div>
% endif
      </div>

    <div id="pulldown">
% if device=="desktop":
      <div id="pulldown-content" class="content in">
% else:
      <div id="pulldown-content" class="content collapse" data-toggle="collapse">
% endif
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#share">
              <i class="icon-share"></i>
              <span translate>share</span>
            </a>
            </div>
            <div id="share" class="collapse">
            <div class="accordion-inner" ng-controller="GaShareController">
              <div ga-share ga-share-options="options"></div>
            </div>
          </div>
        </div> <!-- .accordion-group -->

        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#print">
              <i class="icon-print"></i>
              <span translate>print</span>
            </a>
          </div>
          <div id="print" class="collapse">
            <div class="accordion-inner">
              <%include file="components/print/partials/form.mako.html"/>
            </div>
          </div>
        </div>  <!-- .accordion-group -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#tools">
              <span translate>map_tools</span>
            </a>
          </div>
          <div id="tools" class="collapse">
            <div class="accordion-inner">
            
              <!-- Tools accordion -->
              <div class="accordion" id="tools-accordion">
                
                <!-- Import -->
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle collapsed" data-toggle="collapse"
                       data-parent="#tools-accordion" href="#import">
                      <i class="icon-collapse-alt"></i><span translate>import</span>
                    </a>
                  </div>
                  <div id="import" class="accordion-body collapse">
                    <div class="accordion-inner">
                      <ul>
                        <!-- We can't use translate directive for these links, see:
                        https://github.com/PascalPrecht/angular-translate/issues/129 -->  
                        <li>
                          <i class="icon-external-link"></i>  
                          <a href="" ng-click="importWmsPopupShown = !importWmsPopupShown">{{'wms' | translate}}</a>
                        </li>
                        <li> 
                          <i class="icon-file"></i>  
                          <a href=""  ng-click="importKmlPopupShown = !importKmlPopupShown">{{'kml' | translate}}</a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>


                <!-- Measure -->
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle collapsed" data-toggle="collapse"
                       data-parent="#tools-accordion" href="#measure" >
                      <i class="icon-collapse-alt"></i><span translate>measure</span>
                    </a>
                  </div>
                  <div id="measure" class="accordion-body collapse">
                    <div class="accordion-inner">
                      Under construction ...
                    </div>
                  </div>
                </div>


                <!-- Drawing -->
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle collapsed" data-toggle="collapse"
                       data-parent="#tools-accordion" href="#drawing" >
                      <i class="icon-collapse-alt"></i><span translate>drawing</span>
                    </a>
                  </div>
                  <div id="drawing" class="accordion-body collapse">
                    <div class="accordion-inner">
                      Under construction ...
                    </div>
                  </div>
                </div>
              </div>
              <!--  end tools accordion -->
            </div> 
          </div>
        </div> <!-- .accordion-group -->

        <div class="accordion-group">
          <div class="accordion-heading">
            <div class="theme-toggle">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" translate>choose_theme</a>
              <div class="dropdown-menu" ng-controller="GaTopicController">
                <div ga-topic ga-topic-options="options"></div>
              </div>
            </div>
            <a class="accordion-toggle light collapsed" data-toggle="collapse" href="#catalog">
              <i class="visible-collapsed icon-caret-right"></i>
              <i class="hidden-collapsed icon-caret-down"></i>
              <span translate>catalog</span>
            </a>
          </div>
          <div id="catalog" class="collapse">
            <div class="accordion-inner accordion-inner-catalog" ng-controller="GaCatalogtreeController">
              <div ga-catalogtree ga-catalogtree-map="map" ga-catalogtree-options="options"></div>
            </div>
          </div>
        </div> <!-- .accordion-group -->
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle light collapsed" data-toggle="collapse" href="#selection">
              <i class="visible-collapsed icon-caret-right"></i>
              <i class="hidden-collapsed icon-caret-down"></i>
              <span translate>layer_selection</span>
            </a>
          </div>
          <div id="selection" class="collapse">
            <div class="accordion-inner">
              <p>under construction ...</p>
            </div>
          </div>
        </div> <!-- .accordion-group -->
% if device=='mobile':
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#impressum">
              Impressum
            </a>
          </div>
          <div id="impressum" class="collapse">
            <div class="accordion-inner">
              <div ng-controller="GaTranslationController">
                <div ga-translation-selector
                  ga-translation-selector-options="options"></div>
              </div>
              <div ga-background-layer-selector
                ga-background-layer-selector-map="map"></div>
            <hr>
            <div id="copyrightstext" class="pull-left">
              <span >&copy;&nbsp;</span>
              <span translate>data</span>
            </div>
            <div ga-attribution ga-attribution-map="map"></div>
            <p>
              <a href="http://www.geo.admin.ch/internet/geoportal/en/home/geoadmin/contact.html#copyright">Copyright & data protection</a>
              <br>
              <a href="http://www.geo.admin.ch/internet/geoportal/en/home.html">geo.admin.ch</a>
              <br>
              <a href="#feedback" data-toggle="modal" translate>problem_announcement</a>
            </p>
            </div>
          </div>
        </div> <!-- .accordion-group -->
% endif
      </div> <!-- #pulldown-content -->

% if device=="desktop":
      <button type="button" data-toggle="collapse" data-target="#pulldown-content" class="toggle btn btn-default">
% else:
      <button type="button" data-toggle="collapse" data-target="#pulldown-content" class="toggle btn btn-default collapsed">
% endif
        <span class="hidden-collapsed">
          <i class="icon-caret-up"></i> <span translate>close_menu</span>
        </span>
        <span class="visible-collapsed">
          <i class="icon-reorder"></i>
          <i class="icon-caret-down"></i>
          <span translate>open_menu</span>
        </span>
      </button>
    </div> <!-- #pulldown -->

    <!-- feedback dialog -->
    <div ng-controller="GaFeedbackController" class="modal-container">
      <div id="feedback" class="modal fade" tabindex="-1" role="dialog" ga-modal-show="feedbackModalShown">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">x</button>
              <h4 class="modal-title" translate>problem_announcement</h4>
            </div>
            <div ga-feedback
              ga-feedback-options="options"
              ga-feedback-response="response"></div>
          </div>
        </div>
      </div>
      <div id="feedback-success" class="modal fade" tabindex="-1" role="dialog" ga-modal-show="feedbackSuccessModalShown">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">x</button>
              <h4 class="modal-title" translate>success</h4>
            </div>
            <div class="modal-body" translate>
              feedback_success_message
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" translate>close</button>
            </div>
          </div>
        </div>
      </div>
      <div id="feedback-error" class="modal fade" tabindex="-1" role="dialog" ga-modal-show="feedbackErrorModalShown">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">x</button>
              <h4 class="modal-title" translate>error</h4>
            </div>
            <div class="modal-body" translate>
              feedback_error_message
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" translate>close</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Popup: Import WMS -->
    <div ga-popup="importWmsPopupShown"
         ga-popup-options="{title:'import_wms'}"
         ga-draggable=".ga-popup-title"
         id="import-wms-popup" >
	    <div ng-controller="GaImportWmsController">
        <div ga-import-wms
		         ga-import-wms-map="map"
		         ga-import-wms-options="options"
             id="import-wms"
             class="import-wms">
        </div>
	    </div>
    </div> <!-- end Import WMS -->
    
    <!-- Popup: Import KML -->
    <div ga-popup="importKmlPopupShown"
         ga-popup-options="{title:'import_kml'}"
         ga-draggable=".ga-popup-title"
         id="import-kml-popup" >
      <div ng-controller="GaImportKmlController">
        <div ga-import-kml 
             ga-import-kml-map="map"
             ga-import-kml-options="options"
             id="import-kml"
             class="import-kml">
        </div>
      </div>
    </div><!-- end Import KML -->

% if mode == "prod":
    <script src="${version}lib/build.js"></script>
% else:
    <script src="lib/jquery-2.0.3.js"></script>
    <script src="lib/angular-1.1.5.js"></script>
    <script src="lib/angular-translate-0.9.4.js"></script>
    <script src="lib/angular-translate-loader-static-files-0.1.2.js"></script>
    <script src="lib/bootstrap-3.0.0.js"></script>
    <script src="lib/typeahead-0.9.3.js"></script>
    <script src="lib/proj4js-compressed.js"></script>
    <script src="lib/EPSG21781.js"></script>
    <script src="lib/EPSG2056.js"></script>

    <!-- Use Closure to load the application scripts -->
    <script>
      window.CLOSURE_NO_DEPS = true;
    </script>

    <!-- ol-whitespace.js includes Closure's base.js code, so we don't
         need to load base.js ourselves. We keep Closure's base.js file
         around in case we need to test with ol.js or ol-simple.js. -->
    <script src="lib/ol-whitespace.js"></script>
    <!--<script src="lib/closure/base.js"></script>-->
    <script src="deps.js"></script>
    <script>
      goog.require('ga');
    </script>

%endif
    <script>
      (function() {
         var module = angular.module('ga');

         module.constant('gaGlobalOptions',
           {serviceUrl : '${service_url}',
            baseUrlPath: '${base_url_path}'});
      })();
    </script>

    <link rel="stylesheet" href="http://simonwhitaker.github.io/github-fork-ribbon-css/gh-fork-ribbon.css" />
    <!--[if IE]>
    <link rel="stylesheet" href="http://simonwhitaker.github.io/github-fork-ribbon-css/gh-fork-ribbon.ie.css" />
    <![endif]-->
% if device == 'mobile':
    <div class="github-fork-ribbon-wrapper left-bottom" style="z-index:2000;width:75px;height:75px;">
      <div class="github-fork-ribbon" style="top:34px;left:-37px;">
        <a href="mailto:info@geo.admin.ch" style="width:130px;">Preview</a>
      </div>
    </div>
% else:
    <div class="github-fork-ribbon-wrapper right-bottom" style="z-index:2000">
      <div class="github-fork-ribbon">
        <a href="mailto:info@geo.admin.ch">Application preview</a>
      </div>
    </div>
% endif
  </body>
</html>
